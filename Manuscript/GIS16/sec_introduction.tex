\section{Introduction}

%TO-DO lists:
%\begin{itemize}
%	\item Problem definition: define driver profile, rider profile and our price model.
%	
%	\item Define our objective functions (i.e., maximize extra profit), and differentiate it with other optimization goal (e.g., minimize extra distance). 
%	%Given a rider and a driver with their profiles, calculate the cost of accepting the rider. 
%	
%	\item Introduce overall framework, and describe our auction-based mechanism.
%	
%	\item Properties of our framework in both local setting and global setting. In the local setting, show that we will get the same profit as the centralized setting. In the global setting, show that our technique can achieve certain approximation ratio compared with the global optimal (or upper bound of global optimal),  or vice verse we will suffer from certain degenerated cases.
%	
%	\item Optimizations: a) Maintain coarse-grained hierarchic index (adaptive grids, quad-tree), b) maintain novel shortest path index which is fine tuned for ride-sharing applications c) batch processing rider requests (single round bidding v.s. multi-round bidding).
%	
%\end{itemize}

%%%%%% 1. background information
% Ridesharing becomes popular recently because it has potential to match riders with similar itineraries and time schedules, and to bring significant benefits to individual users and the city as a whole. 

Real-time ridesharing is an importang problem because it can ease traffic congestion, decrease auto emissions, while at the same time serve the transportation needs. With the emegence of many commecial platforms (e.g., Uber and Lyft) which automatically match drivers and riders on-the-fly, real-time ridesharing becomes more and more popular throughout the world. According to xxx, since the lauching of UberPool at XXX, the number of ridesharing trips at SF per day has reached xxx. These platforms, enabled by the development and technology advances of smartphones, location-based service and high-speed wireless network, are typically operaterd as follows: (1) riders and drivers with the installed mobile app can join and leave the platform independently, (2) a rider request which consists of the origin and destination can be submitted at anytime to the platform. (3) Once receiving the request, the platform determines the most appropriate drivers (even en-route) to pick up the rider and complete the request. (4) When the trip is completed, the platform calculates the payment of riders and the rewards of drivers. With these platforms, riders can share a vechile with reduced trip cost while  enjoying fast and convenient transportation.

%%%%%% 2. explain the challengs and the detour of ridesharing......
Many challenges exist to enable such real-time ridesharing platform. First, the framework should consider the conflicting interests of differnt participants (i.e., riders, dirvers and platform providers). For example, riders would like to arrive at their destinations quickly and cheaply, whereas drivers and platform providers would like to maximize their profits. Although ridesharing can reduce the cost of riders by sharing similar itineraries, it also incurs extra travel distance. Ideally, riders are expected to be compensated for their detour, while drivers are expected to earn more profit. These factors makes the design of a fair pricing scheme (i.e., the payment and rewards) that satisfies the requirements of both riders and drivers even more complexing. Secondly, because the riders requests are generated on-the-fly, the framework should decide the matching drivers (even en-route) at a short amount of time. Therefore, the design of an efficient framework that match riders and drivers, with a fair pricing shcheme that provides incentives for all particiants becomes a distinguishing business strategy. 

%%% 3. show the shortcomings of existing work and how they fail to address the challenge
The majority of previous studies~\cite{} focus on improving the efficiency of on-the-fly matching with the objective of minimizing the travel distance of drivers. However, minimizing drivers' travel distance is not always equivalent to shorter trips for riders. Consider the example of xxx, blablabla. On the other hand, few studies~\cite{} consider the design of a pricing scheme by adding a monetary constraints between riders and drivers, without incorporating the profit of the platform provider. Hence, their objective is still to minimize the total travel distance of drivers instead of the profit of the ridesharing platform. Moreover, in~\cite{}, riders (resp. drivers) have less flexibility to express the desires of their expected compensation (resp. rewards), which makes their pricing scheme less applicable for the general ridesharing platform. \dingedit{Discuss ICDE ends up paying more money for riders?}. Therefore, there are no established dynamic ridesharing platform that offers the convenience of efficient matching, while handling individual preferences and requirements. 

%%% 4. explain our pricing model, and provides more intuition of better service quality.
To address these challenges, in this paper, we introduce an Auction-based Price-Aware Real-time (\textit{APART}) ridesharing framework. We propose a general and flexible pricing model that simultaneously satisfies both the riders and drivers constraints and desires (formulated as their profiles). Specifically, each rider profile defines the expected discount ratio for the detours incurred by ridesharing; each driver profile defines the expected cost in terms of his/her total travel distance and time, with which we can determine the fare of one rider request, the earning of the driver, and hence the profit of the platform provider. Consequently, our objective is to maximize the total profit of the ridesharing platform while satisfying various constraints of both riders and drivers. One important feature of our pricing scheme is that by maximizing the total profit, we achieve a good tradeoff between the contradictory goals of reducing rider cost and increasing driver and platform revenues. This is because, in order to maximize the revenue, our framework automatilly reduces the rider detour with less compensation. Therefore, our framework can engage available drivers more effectively by serving more request (i.e. higher service rate) with less travelling distance (i.e., higher service quality), thus increasing the overall profit of the ridesharing platforms.  

%%% 5. explain our framework
To efficiently assign riders to the candidate drivers, we further introduce a distribued aunction-based algorithm. With APART, our framework broadcasts each rider request to a set of candidate drivers by maintaining an index structure (e.g., grid index). Once receiving the request, each candidate driver's mobile app automatilly calculates the bids (i.e., the profit of accepting this request) by considering both the drivers's and the rider's profiles, their itineriries and other constraints. Subsequently, the server collects all the bids from candidate driver's mobile apps, then determines the highest bidder and assigns the rider to that bidder. To guarantee high service quality, we propose a branch-and-bound algorthim, which performs an exaustive search to find out whether one rider request can fit into and how to best fit into the driver's existing scheduling. Because each driver maintains a small number of riders and the scheduling process is parallely computed at each candidate driver, we can deterimne the most appropriate drivers in real-time. One side-effect of our distributed framework is that the grid index structure requires less update and maintainence, which further reduced the burden of the server. \dingedit{Have we used index structure in the code? If not, just delete the last sentence} 

%%% 6. show some experiment resutls
We conducted extensive experiments on a large scale New York City taxi dataset and showed that APART is scalable and efficient, processing hundres of tasks per second in the presence of thousands of drivers. By comparing our framework with the-state-of-the-art approaches~\cite{Huang14}, we show that our framework can simultaneoulsy match xxx\% more riders to drivers (i.e. higher service rate), while the total travel distance of riders are xxx\% less (i.e., better service qulity). Finally, because of higher service rate and shorter trips, our framework can earn XXX\% more profit than other approaches
Finally, we noticed that based on this pricing model of ICDE'13, up to x\% of passengers end up paying even more that what they would have payed if they did not share a ride.

The remaining of our paper are organizes as follows:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% from mohammod 

% Because platforms like Uber and Lyft are becoming more popular (we can show some numbers how their businesses are growing in the recent years). Ridesharing become popular recently. Existing ridesharing studies mainly focus on matching riders and drivers only considering their spatiotemporal constraints (max wait time, maximum detour, etc.)

% It is important to design systems that not only satisfy spatiotemporal constraints of the users, but also take into consideration the monetary aspect of the business (i.e., the fees riders pay, the drivers' income and the system's profit). A key component of such framework is to xxx and xxx.

% While most studies ignore this aspect of the system, T-Share provides a pricing model where on average riders end up paying less when compared to each passenger riding alone. However, based on some experimental results on NYC's taxi dataset, we noticed based on this pricing model, up to x\% of passengers end up paying even more that what they would have payed if they did not share a ride. Hence, this requires the design of a pricing model which is fair to every passenger meaning that if a passenger's trip gets longer as a result of sharing a ride, they should end up paying less (receiving a discount).

% To address the above challenges, in this paper we propose xxx. The goal of our framework is to maximize the profit of the platform. Because we utilize a pricing model which compensates riders for longer trips, in order to maximize the profit, our framework reduces the detour of passengers and hence, providing better service quality.

% Also, APART utilized an auction based approach allowing it to scale by distributing the computation among drivers (You can probably use a good chunk of this part from my CIKM submission).

% We evaluated our .

% The paper is organized as follows:
